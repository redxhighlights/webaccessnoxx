<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Remote PC Control</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h1>🖥️ Remote PC Control</h1>

  <div>
    <button onclick="sendCommand('shutdown')">🔌 Shutdown PC</button>
    <button onclick="sendCommand('screenshot')">📸 Take Screenshot</button>
  </div>

  <div>
    <input type="text" id="popupMsg" placeholder="⚠️ Enter warning message">
    <button onclick="sendPopup()">🚨 Send Warning</button>
  </div>

  <h2>🖼️ Live Screenshot</h2>
  <img src="/get_screenshot" width="600" id="screen" alt="Live Screen" />

  <script>
    setInterval(() => {
      document.getElementById("screen").src = '/get_screenshot?cache=' + new Date().getTime();
    }, 5000);

    function sendCommand(type) {
      fetch('/add_command?pass=mysecretpass', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action: type })
      });
    }

    function sendPopup() {
      const msg = document.getElementById("popupMsg").value;
      if (!msg) {
        alert("⚠️ Please enter a message.");
        return;
      }
      fetch('/add_command?pass=mysecretpass', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action: 'popup', message: msg })
      });
      document.getElementById("popupMsg").value = "";
    }
  </script>
</body>
</html>
